# Spec: 相关性分析与投资宇宙构建

> 所有命令在沙箱外运行。

## 上下文

在 `q2-what-to-buy.ipynb` 中已有：
- 沪深300ETF（510300.SS）和纳斯达克100ETF（QQQ）的历史数据
- 学员已通过 GDP 数据锁定中美
- 当前问题：中美都是股市，可能同涨同跌，加什么能保护组合？

## 任务

在 notebook 中新建代码单元格，引入黄金 ETF 作为对冲资产，通过相关性分析验证三资产的分散化效果，并用 open-xquant 的 StaticUniverse 正式构建投资宇宙。

## 要求

1. 在 notebook 中新建代码单元格
2. 使用 `YFinanceDownloader` 下载黄金 ETF（GLD）最近 5 年数据（起始日期 `2021-01-01`，结束日期为当天）
3. 使用 `LocalMarketDataProvider` 读取三只 ETF 的数据（510300.SS、QQQ、GLD）
4. 将三只 ETF 的收盘价合并为一个 DataFrame，列名改为中文：`{"510300.SS": "沪深300", "QQQ": "纳指100", "GLD": "黄金"}`
5. 计算日收益率（pct_change），然后计算相关性矩阵
6. 画相关性热力图（figsize 8×6）：
   - 使用 matplotlib 的 imshow
   - 在每个格子中标注相关系数数值（保留 2 位小数）
   - 使用 coolwarm 色系
   - 标题「三资产日收益率相关性」
7. 对比实验——组合 vs 单押：
   - 单押方案：100% 沪深300
   - 等权组合：沪深300、纳指100、黄金各 1/3
   - 计算两种方案的日收益率序列
   - 计算并对比：累计收益率、年化波动率、最大回撤
8. 画两条累计收益率曲线对比图（figsize 12×6）：
   - 单押沪深300（灰色虚线）vs 等权三资产组合（实线）
   - 图例标注方案名称
   - 标题「单押沪深300 vs 三资产等权组合」
9. 使用 open-xquant 构建投资宇宙：
   ```python
   from oxq.universe import StaticUniverse
   universe = StaticUniverse(
       symbols=["510300.SS", "QQQ", "GLD"],
       name="global-macro-etf"
   )
   snapshot = universe.get_universe(as_of_date="2026-02-28")
   ```

## 结果呈现

1. 相关性热力图
2. 打印相关性解读：
   - 「沪深300 与 纳指100 的相关性：X.XX —— 两个股票市场有一定联动，但并非完全同步」
   - 「沪深300 与 黄金 的相关性：X.XX —— 黄金与股市低相关，股市跌的时候它不一定跌」
3. 打印组合 vs 单押的对比表：

| 指标 | 单押沪深300 | 三资产等权组合 |
|------|------------|---------------|
| 累计收益率 | X.XX% | X.XX% |
| 年化波动率 | X.XX% | X.XX% |
| 最大回撤 | X.XX% | X.XX% |

4. 累计收益率对比图
5. 打印关键认知：「数据说了算：分散风险的关键不是多买几个，而是买涨跌不同步的。」
6. 打印投资宇宙构建结果：`「投资宇宙构建完成：{snapshot.symbols}」`
