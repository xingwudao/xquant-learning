# Spec: 样本外测试

> 所有命令在沙箱外运行。

## 上下文

在 `q1-strategy.ipynb` 中已有：
- 沪深300ETF 日线数据（变量 `df`）
- 简单定投回测函数 `backtest_dca`
- 带均线条件的回测函数 `backtest_dca_with_ma`（可传入 `ma_period` 参数）
- 参数扫描代码（扫描 MA5 到 MA120）

## 任务

将数据分为训练集和测试集，验证「最优参数」在未见过的新数据上是否仍然有效。

## 要求

1. 在 notebook 中新建代码单元格
2. 数据分割：按时间前 60% 为训练集，后 40% 为测试集
3. 在训练集上扫描参数（MA5 到 MA120，步长 5），找到训练集上的最优参数
4. 用该最优参数在测试集上运行均线回测
5. 同时在测试集上运行简单定投作为对照
6. 对比三个收益率：训练集最优、测试集该参数、测试集简单定投

## 结果呈现

1. 打印：训练集时间范围和数据条数、测试集时间范围和数据条数
2. 打印：训练集最优参数和收益率
3. 打印：测试集上该参数的收益率
4. 打印：测试集上简单定投的收益率
5. 对比结论：
   - 如果最优参数在测试集上比简单定投还差：打印「这就是过拟合——你在历史数据上找到的是巧合，不是规律」
   - 否则：打印「结果看起来还行，但仍需谨慎，样本量有限」
